<div>

  <div class="ui top attached menu borderless">
    <div class="item"><strong>Payments List</strong></div>
  </div>

  <div class="ui segment bottom attached">
    <%= render 'search_form' %>
  </div>

  <div class="ui segment top attached">
    <p>
      <span>Status:</span>
      <%= link_to 'All', filter_params(except: [:type]), class: ex_active_params(type: '') %>
      <%= link_to 'Bank', filter_params(type: :BankPayment), class: ex_active_params(type: 'BankPayment') %>
      <%= link_to 'Hand', filter_params(type: :HandPayment), class: ex_active_params(type: 'HandPayment') %>
      <%= link_to 'Paypal', filter_params(type: :PaypalPayment), class: ex_active_params(type: 'PaypalPayment') %>
    </p>
    <p>
      <%= link_to 'Add New', new_admin_payment_path, class: 'ui teal button' %>
    </p>
  </div>

  <table class="ui bottom attached table">
    <thead>
    <tr>
      <th>ID</th>
      <th>Payment Type</th>
      <th>Total Amount</th>
      <th>Fee Amount</th>
      <th>Time</th>
      <th colspan="3"></th>
    </tr>
    </thead>

    <tbody>
    <% @payments.each do |payment| %>
      <tr id="payment_<%= payment.id %>">
        <td><%= payment.id %></td>
        <td><%= Payment.enum_i18n(:type, payment.type) %></td>
        <td><%= payment.total_amount %></td>
        <td><%= payment.fee_amount %></td>
        <td><%= payment.notified_at.to_s %></td>
        <td>
          <% if payment.payment_method %>
            <%= link_to 'show', admin_payment_methods_path(id: payment.payment_method_id), class: 'ui mini blue button', target: '_blank' %>
            <%= link_to 'checking', new_admin_payment_payment_order_path(payment), class: 'ui mini red button', remote: true %>
          <% else %>
            <%= link_to 'analyze', analyze_admin_payment_path(payment), method: :patch, class: 'ui mini blue button', remote: true %>
          <% end %>
        </td>
        <td><%= link_to 'Edit', edit_admin_payment_path(payment) %></td>
        <td><%= link_to 'Destroy', admin_payment_path(payment), method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
    </tbody>
  </table>

  <%= paginate @payments %>
</div>